{% extends "puzzles/base_generic.html" %}

{% block title %}Overview{% endblock %}

{% block content %}
  <center>
    View puzzles by:
    {% for taglist in taglists %}
      {% if taglist.id == active_taglist_id %}
	<span class="active-taglist">
	  <span class="taglist">{{ taglist.name }}</span>
	</span>
      {% else %}
	<a href="{% url puzzles.views.overview_by taglist.id %}"><span class="taglist">{{ taglist.name }}</span></a>
      {% endif %}
    {% endfor %}
  </center>

  {% for tag in tags %}
    <table class="puzzle-list">
      <tbody>
	<tr class="puzzle-list-header">
	  <th colspan=3>
	    Puzzles with tag <span class="tag">{{ tag.name }}</span>
	  </th>
	</tr>
	{% for puzzle in tag.puzzles %}
	  <tr class="{% cycle "puzzle-list-odd" "puzzle-list-even" %}">
	    <td class="puzzle-list-puzzle">
	      <a target="_blank" href="{{ puzzle.url }}">[P]</a>
	    </td>
	    <td class="puzzle-list-title">
	      <a href="{% url puzzles.views.puzzle puzzle.id %}">{{ puzzle.title }}</a>
	      {% if puzzle.priority != default_priority %}
	      <span class="puzzle-priority priority-{{ puzzle.priority.css_name }}">{{ puzzle.priority.text }}</span>
	      {% endif %}
	    </td>
	    <td class="puzzle-list-status">
	      {% if puzzle.answer_or_status.answer %}
	      <span class="puzzle-answer">{{ puzzle.answer_or_status.answer }}</span>
	      {% else %}
	      {{ puzzle.answer_or_status.status.text }}
	      {% endif %}
	    </td>
	  </tr>
	{% endfor %}
      </tbody>
    </table>
  {% endfor %}
{% endblock %}
